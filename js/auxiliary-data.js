/**
 * 輔助命理資料：袁天罡稱骨、紫微命主身主對照
 * 套用網路標準資料，供八字分析匹配
 */
(function (global) {
    'use strict';

    /** 袁天罡稱骨 - 年干支骨重（兩錢，標準對照表） */
    var CHENGGU_YEAR = {
        '甲子': 1.2, '乙丑': 0.9, '丙寅': 0.6, '丁卯': 0.7, '戊辰': 1.2, '己巳': 0.5, '庚午': 0.9, '辛未': 0.8, '壬申': 0.7, '癸酉': 0.8,
        '甲戌': 1.5, '乙亥': 0.9, '丙子': 1.6, '丁丑': 0.8, '戊寅': 0.8, '己卯': 1.9, '庚辰': 1.2, '辛巳': 0.6, '壬午': 0.8, '癸未': 0.7,
        '甲申': 0.5, '乙酉': 1.5, '丙戌': 0.6, '丁亥': 1.6, '戊子': 1.5, '己丑': 0.7, '庚寅': 0.9, '辛卯': 1.2, '壬辰': 1.0, '癸巳': 0.7,
        '甲午': 1.5, '乙未': 0.6, '丙申': 0.5, '丁酉': 1.4, '戊戌': 1.1, '己亥': 0.9, '庚子': 0.7, '辛丑': 0.7, '壬寅': 0.9, '癸卯': 1.2,
        '甲辰': 0.8, '乙巳': 0.7, '丙午': 1.3, '丁未': 0.5, '戊申': 0.5, '己酉': 0.5, '庚戌': 0.9, '辛亥': 1.7, '壬子': 0.5, '癸丑': 0.7,
        '甲寅': 1.2, '乙卯': 0.8, '丙辰': 0.8, '丁巳': 0.7, '戊午': 1.9, '己未': 0.6, '庚申': 0.8, '辛酉': 1.6, '壬戌': 1.0, '癸亥': 0.8
    };

    /** 袁天罡稱骨 - 月骨重（農曆正月～十二月，節氣月寅～丑對應） */
    var CHENGGU_MONTH = { '寅': 0.6, '卯': 0.7, '辰': 0.9, '巳': 0.9, '午': 0.5, '未': 1.6, '申': 0.9, '酉': 1.5, '戌': 1.8, '亥': 0.8, '子': 0.9, '丑': 0.5 };

    /** 袁天罡稱骨 - 日骨重（農曆初一～三十，標準對照） */
    var CHENGGU_DAY = [0.5, 1.0, 0.8, 1.5, 1.6, 1.5, 0.8, 1.6, 0.8, 1.6, 0.9, 1.7, 0.8, 1.7, 0.9, 0.8, 0.9, 1.8, 0.5, 1.5, 1.0, 1.0, 0.9, 0.8, 1.5, 1.6, 1.8, 0.7, 0.8, 1.6, 0.6];

    /** 袁天罡稱骨 - 時辰骨重 */
    var CHENGGU_HOUR = { '子': 1.6, '丑': 0.6, '寅': 0.7, '卯': 1.0, '辰': 0.9, '巳': 1.6, '午': 1.0, '未': 0.8, '申': 0.8, '酉': 0.9, '戌': 0.6, '亥': 0.6 };

    /** 袁天罡稱骨歌（2.1～7.2兩，依標準對照） */
    var CHENGGU_POEMS = {
        2.1: '短命非業謂大凶，平生災難事重重；凶禍頻臨陷逆境，終世困苦事不成。',
        2.2: '身寒骨冷苦伶仃，此命推來行乞人；勞勞碌碌難度日，終年打拱過平生。',
        2.3: '此命推來骨格輕，求謀作事事難成；妻兒子女應難許，別處他鄉作散人。',
        2.4: '此命推來福祿無，門庭困苦總難榮；六親骨肉皆無靠，流浪他鄉作老翁。',
        2.5: '命推來福祖業微，庭困營度似稀奇；六親骨肉如冰炭，一世勤勞自把持。',
        2.6: '平生衣祿苦中求，獨自營謀事不休；離祖出門宜早計，晚來衣食自無憂。',
        2.7: '一生作事少商量，難靠祖宗作主張；獨馬單槍空做去，早年晚歲總無長。',
        2.8: '一生行事似飄蓬，祖宗產業在夢中；若不過房改名姓，也當移徙二三通。',
        2.9: '初年運限未能通，縱有功名在後成；須過四旬才可立，移居改姓始為良。',
        3.0: '勞勞碌碌苦中求，東奔西走何日休；若能終身勤與儉，老來稍可免憂愁。',
        3.1: '忙忙碌碌苦中求，何日雲開見日頭；難得祖基家可立，中年衣食漸無憂。',
        3.2: '初年運蹇事難謀，漸有財源如水流；到得中年衣食旺，那時名利一齊收。',
        3.3: '早年做事事難成，百計勤勞枉費心；半世自如流水去，後來運到始得金。',
        3.4: '此命福氣果如何，僧道門中衣祿多；離祖出家方為妙，朝晚拜佛念彌陀。',
        3.5: '生平福量不周全，祖業根基覺少傳；營事生涯宜守舊，時來衣食勝從前。',
        3.6: '不須勞碌過平生，獨自成家福不輕；早有福星常照命，任君行去百般成。',
        3.7: '此命般般事不成，弟兄少力自孤行；縱然祖業雖微有，來得明時去不明。',
        3.8: '一生骨肉最清高，早入黌門姓名標；待到年將三十六，藍衣脫去換紅袍。',
        3.9: '此命終身運不通，勞勞作事盡皆空；苦心竭力成家計，到得那時在夢中。',
        4.0: '平生衣祿是綿長，件件心中自主張；前面風霜多受過，後來必定享安康。',
        4.1: '此命推來是不同，為人能幹異凡庸；中年還有逍遙福，不比前年運未通。',
        4.2: '得寬懷處且寬懷，何用雙眉皺不開；若使中年命運濟，那時名利一齊來。',
        4.3: '為人心性最聰明，作事軒昂近貴人；衣祿一生天數定，不須勞碌是豐享。',
        4.4: '萬事由天莫苦求，須知福祿賴人修；中年財帛難如意，晚景欣然便不憂。',
        4.5: '名利推來竟若何，前番辛苦後奔波；命中難養男與女，骨肉扶持也不多。',
        4.6: '東南西北盡皆通，出姓移居更覺隆；衣祿無虧天數定，中年晚景一般同。',
        4.7: '此命推來旺末年，妻榮子貴自怡然；平生原有滔滔福，可有財源若水泉。',
        4.8: '幼年運道未能通，若是蹉跎命不同；兄弟六親皆無靠，一身事業晚來隆。',
        4.9: '此命推來福不輕，自成自立顯門庭；從來富貴人親近，使婢差奴過一生。',
        5.0: '為利為名終日勞，中年福祿也多遭；老年自有財星照，不比前番目下高。',
        5.1: '一世榮華事事通，不須勞苦自亨通；弟兄取侄皆如意，家業成時福祿宏。',
        5.2: '一世亨通事事能，不須勞苦自然寧；宗族欣然福祿多，家業豐亨自稱心。',
        5.3: '此格推來福祿宏，興家發達在其中；一生衣食安排定，卻是人間一富翁。',
        5.4: '此命推來厚且清，詩書滿腹功業成；豐衣足食自然穩，正是人間有福人。',
        5.5: '走馬揚鞭爭利名，少年做事費評論；一朝福祿源源至，富貴榮華顯六親。',
        5.6: '此格推來禮義通，一生福祿用無窮；甜酸苦辣皆嚐過，財源滾滾穩且通。',
        5.7: '福祿豐盈萬事全，一生榮耀顯雙親；名揚威振人欽敬，處世逍遙似神仙。',
        5.8: '平生福祿自然來，名利兼全福壽偕；雁塔題名為貴客，紫袍玉帶走金階。',
        5.9: '細推此格秀且清，必定財高學業成；甲第之中應有分，揚鞭走馬顯威榮。',
        6.0: '一朝金榜快題名，顯祖榮官大器成；衣食自然豐裕足，田園財帛更豐盈。',
        6.1: '不作朝中金榜客，官為世上一財翁；聰明天賦經書熟，名顯高科自是榮。',
        6.2: '此命生來福不窮，讀書必定顯親族；紫衣金帶為卿相，富貴榮華皆可同。',
        6.3: '命主為官福祿長，得來富貴定非常；名題雁塔傳金榜，顯耀門庭天下揚。',
        6.4: '此命威權不可當，紫袍金帶坐高堂；榮華富貴誰能及，百世留名姓氏揚。',
        6.5: '細推此命福不輕，富貴榮華孰與爭；定國安邦榮品人，威聲顯赫四方聞。',
        6.6: '此格人間一福人，堆金積玉滿堂春；從來富貴由天定，金榜題名謁聖君。',
        6.7: '此命生來福自宏，田園家業最高隆；平生衣食豐盈足，一世榮華萬事通。',
        6.8: '福貴由天莫苦求，萬金家計不須謀；十年不比前番事，祖業根基水上舟。',
        6.9: '君是人間衣祿星，一生富貴眾人欽；縱然福祿由天定，安享榮華過一生。',
        7.0: '此命推來福非輕，不須愁慮苦勞心；一生天定衣興祿，富貴榮華主一生。',
        7.1: '此命生成大不同，公侯卿相在其中；一生自有逍遙福，富貴榮華極品隆。',
        7.2: '此格世界罕有生，十代積善產此人；天上紫微來照命，統治萬民樂太平。'
    };

    /** 紫微命主（依命宮地支） */
    var ZIWEI_MINGZHU = { '子': '貪狼', '丑': '巨門', '寅': '祿存', '卯': '文曲', '辰': '廉貞', '巳': '武曲', '午': '破軍', '未': '武曲', '申': '廉貞', '酉': '文曲', '戌': '祿存', '亥': '巨門' };

    /** 紫微身主（依年支） */
    var ZIWEI_SHENZHU = { '子': '火星', '丑': '天相', '寅': '天梁', '卯': '天同', '辰': '文昌', '巳': '天機', '午': '火星', '未': '天相', '申': '天梁', '酉': '天同', '戌': '文昌', '亥': '天機' };

    function getChengguPoem(total) {
        var k = Math.floor(total * 10) / 10;
        if (CHENGGU_POEMS[k]) return CHENGGU_POEMS[k];
        var keys = Object.keys(CHENGGU_POEMS).map(Number).sort(function (a, b) { return a - b; });
        for (var i = 0; i < keys.length; i++) {
            if (total <= keys[i]) return CHENGGU_POEMS[keys[i]];
        }
        return CHENGGU_POEMS[7.2];
    }

    global.CHENGGU_YEAR = CHENGGU_YEAR;
    global.CHENGGU_MONTH = CHENGGU_MONTH;
    global.CHENGGU_DAY = CHENGGU_DAY;
    global.CHENGGU_HOUR = CHENGGU_HOUR;
    global.CHENGGU_POEMS = CHENGGU_POEMS;
    global.getChengguPoem = getChengguPoem;
    global.ZIWEI_MINGZHU = ZIWEI_MINGZHU;
    global.ZIWEI_SHENZHU = ZIWEI_SHENZHU;
})(typeof window !== 'undefined' ? window : this);
