/**
 * 手機版結果分析頁面修復
 * 原則：內容先正常填滿全螢幕寬度，只有真正超出的部分才需要左右滾動
 */

@media (max-width: 768px) {
    /* 結果分析頁面：使用全螢幕寬度，內容不超出 */
    #result-section {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: auto !important; /* 只有內容超出時才出現橫向滾動 */
        overflow-y: visible !important;
        -webkit-overflow-scrolling: touch !important;
        padding-left: 0.75rem !important;
        padding-right: 85px !important; /* 僅為浮動按鈕留空間 */
        position: relative !important;
    }
    
    /* 結果容器：填滿父層寬度 */
    #result-section .result-container {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: visible !important;
        overflow-y: visible !important;
        padding-right: 0 !important;
    }
    
    /* 結果概覽：改為垂直堆疊，每個區塊佔滿寬度 */
    #result-section .result-overview {
        display: block !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: visible !important;
        overflow-y: visible !important;
        white-space: normal !important; /* 取消強制不換行 */
    }
    
    /* 概覽卡片、可能性評估：區塊顯示，各佔 100% 寬度 */
    #result-section .result-overview > .overview-card,
    #result-section .result-overview > .probability-meter {
        display: block !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-right: 0 !important;
        margin-bottom: 1rem !important;
    }
    
    /* 概覽卡片與可能性評估內部也限制在 100% */
    #result-section .overview-card,
    #result-section .probability-meter {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: visible !important;
        overflow-y: visible !important;
    }
    
    /* 問題顯示、直接回答：全寬、文字正常換行 */
    #result-section .question-display,
    #result-section .direct-answer {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        white-space: normal !important;
    }
    
    /* 文字與標題：全寬、可換行 */
    #result-section .answer-text,
    #result-section p,
    #result-section span,
    #result-section h3,
    #result-section h4 {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        white-space: normal !important;
        max-width: 100% !important;
    }
    
    /* 維度分析、八字結果區：全寬 */
    #result-section .dimension-analysis,
    #result-section .dimension-content,
    #result-section .dimension-pane,
    #result-section .bazi-result {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: auto !important; /* 僅內部超寬時才橫向滾動 */
        -webkit-overflow-scrolling: touch !important;
    }
    
    /* 分析網格與卡片：單欄、全寬 */
    #result-section .analysis-grid-container {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    #result-section .analysis-card {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* 移除會強制撐開寬度的規則，改為限制在 100% */
    #result-section * {
        box-sizing: border-box !important;
    }
}
